@model IEnumerable<ASI.Basecode.Services.ServiceModels.ArticleViewModel>

@section styles {
    <link rel="stylesheet" href="~/css/KnowledgeBase/Index.css" />
    <script src="https://kit.fontawesome.com/1e457ac318.js" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

}

@{
    ViewData["Title"] = "Knowledge Base";
    var categoryMappings = new Dictionary<int, string>
    {
        { 1, "Technical" },
        { 2, "Billing" },
        { 3, "General Question" },
        { 4, "Account Management" },
        { 5, "Customer Support" },
        { 6, "Others" }
    };
}

<div id="container">
    <header>
        <div class="logo">
            <img src="~/img/alliancedesk-logo.png" style="width: 185px;" alt="logo" onclick="window.location.href = '@Url.Action("Index", "Home")';">
        </div>

        <div class="header-buttons">            
            <a asp-action="Index" asp-controller="Notification"><i class='bx bx-bell bx-sm icon' style="color: #45474B; cursor: pointer;"></i></a>
            <i class='bx bx-cog bx-sm icon' style="color: #45474B; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#settings"></i>

            <a class="profile" href="#">
                <img src="~/img/profile-logo.png" class="dpicn hover-pointer" alt="dp">
            </a>

            <ul class="dropdown" id="dropdownMenu">
                <li>

                    <a class="dropdown-item" href="#"><i class="bx bx-user bx-xs bx-fw" style="color: #3D3B40;"></i> Profile</a>
                </li>
                <li>

                    <a class="dropdown-item" asp-action="SignOutUser" asp-controller="Account"><i class="bx bx-log-out bx-xs bx-fw" style="color: #3D3B40;"></i> Logout</a>
                </li>
            </ul>

        </div>
    </header>

    <nav>
        
    </nav>

    <main>
       

        @Html.Partial("SettingsModal")

    </main>

    <div id="sidebar">

        <button type="button" class="btn active-button "><i class='bx bx-grid-alt bx-sm as' style="align-self:center;"></i> Overview </button>
        <button type="button" class="btn inactive-button"><i class='bx bx-purchase-tag-alt bx-sm as' style="align-self:center;"></i> Tickets </button>
        <button type="button" class="btn inactive-button"><i class='bx bx-group bx-sm as' style="align-self:center;"></i> Teams </button>
        <button type="button" class="btn inactive-button"><i class='bx bx-detail bx-sm as' style="align-self:center;"></i> Knowledge Base </button>
        <button type="button" class="btn inactive-button"><i class='bx bx-objects-vertical-bottom bx-sm as' style="align-self:center;"></i> Analytics </button>

    </div>

</div>



@section Scripts {

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Script for dropdown functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var dpIcon = document.querySelector('.dpicn');
            var dropdownMenu = document.getElementById('dropdownMenu');

            dpIcon.addEventListener('click', function (event) {
                event.stopPropagation();

                if (dropdownMenu.style.display === 'block') {
                    dropdownMenu.style.display = 'none';
                } else {
                    dropdownMenu.style.display = 'block';
                }
            });
        });

        $(document).ready(function () {
            // Hide dropdown content by default
            $('.dropdown-content').hide();

            // Toggle visibility of dropdown content on .dp-logo click
            $('.dp-logo').on('click', function () {
                $('.dropdown-content').toggle();
            });

            // Close the dropdown if the user clicks outside of it
            $(document).on('click', function (event) {
                if (!$(event.target).closest('.addArt-dropdown').length) {
                    $('.dropdown-content').hide();
                }
            });
        });
    </script>

    <script>
        $(document).ready(function () {
            // Add active class to the current link on page load
            var currentAction = '@(ViewContext.RouteData.Values["Action"].ToString())';
            $('.sections a').each(function () {
                if ($(this).attr('asp-action') === currentAction) {
                    $(this).addClass('active');
                }
            });

            // Toggle active class on click
            $('.sections a').on('click', function () {
                $('.sections a').removeClass('active');
                $(this).addClass('active');
            });
        });
    </script>

    <script>
        var itemId;
        function displayDeleteModal(id) {
            itemId = id;
            $('#deleteModal').modal('show');
        }
        $('#confirmDeleteBtn').on('click', function () {
            $.ajax({
                url: '@Url.Action("PostDelete", "SampleCrud")',
                type: 'POST',
                data: {id: itemId},
                success: function (result) {
                    sessionStorage.setItem("DeleteSuccess", "Deleted Successfully");
                    window.location.href = '@Url.Action("Index", "SampleCrud")';
                }
            })
        })

    </script>

    <script>
        var createMessage = '@TempData["CreateMessage"]';
        var deleteMessage = sessionStorage.getItem("DeleteSuccess");

        if (createMessage) {
            toastr.success(createMessage);
        } else if (deleteMessage) {
            toastr.success(deleteMessage);
            sessionStorage.removeItem("DeleteSuccess");
        }
    </script>
}
